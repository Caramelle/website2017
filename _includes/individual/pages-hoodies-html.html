<script>
    var hoodies = {
        college: {
            unisex: {
                code: "JH001",
                id: "3725",
                colors: [["Airforce Blue",{"r":145,"g":156,"b":170}],["Apple Green",{"r":193,"g":209,"b":185}],["Alien Green",{"r":194,"g":227,"b":166}],["Ash",{"r":213,"g":212,"b":217}],["Arctic White",{"r":234,"g":233,"b":237}],["Baby Pink",{"r":224,"g":207,"b":212}],["Burnt Orange",{"r":228,"g":168,"b":147}],["Bottle Green",{"r":140,"g":156,"b":145}],["Burgundy",{"r":166,"g":125,"b":136}],["Candyfloss Pink",{"r":224,"g":176,"b":194}],["Charcoal",{"r":144,"g":142,"b":142}],["Cornflower Blue",{"r":173,"g":188,"b":208}],["Cranberry",{"r":183,"g":129,"b":140}],["Desert Sand",{"r":216,"g":207,"b":195}],["Sherbet Lemon",{"r":242,"g":218,"b":155}],["Fire Red",{"r":208,"g":132,"b":132}],["Gold",{"r":232,"g":200,"b":136}],["Hawaiian Blue",{"r":157,"g":198,"b":214}],["Heather Grey",{"r":209,"g":208,"b":215}],["Hot Chocolate",{"r":143,"g":132,"b":128}],["Hot Pink",{"r":207,"g":137,"b":157}],["Jade",{"r":116,"g":166,"b":162}],["Jet Black",{"r":94,"g":94,"b":94}],["Kelly Green",{"r":155,"g":216,"b":184}],["Lavender",{"r":213,"g":199,"b":217}],["Lime Green",{"r":173,"g":205,"b":153}],["Lipstick Pink",{"r":224,"g":149,"b":160}],["Magenta Magic",{"r":172,"g":143,"b":178}],["Moondust Grey",{"r":195,"g":194,"b":198}],["Moss Green",{"r":174,"g":193,"b":188}],["Orange Crush",{"r":226,"g":163,"b":113}],["Olive Green",{"r":172,"g":167,"b":158}],["Oxford Navy",{"r":107,"g":106,"b":118}],["Peppermint",{"r":187,"g":216,"b":212}],["Plum",{"r":166,"g":136,"b":155}],["Pinky Purple",{"r":208,"g":165,"b":192}],["Purple",{"r":159,"g":145,"b":179}],["Red Hot Chilli",{"r":206,"g":133,"b":140}],["Royal Blue",{"r":122,"g":132,"b":184}],["Sapphire Blue",{"r":139,"g":181,"b":208}],["Sky Blue",{"r":198,"g":208,"b":218}],["Sunset Red",{"r":244,"g":123,"b":113}],["Steel Grey",{"r":151,"g":146,"b":145}],["Storm Grey",{"r":139,"g":129,"b":136}],["Sun Yellow",{"r":236,"g":216,"b":133}],["Turquoise Surf",{"r":166,"g":205,"b":212}],["True Violet",{"r":182,"g":183,"b":207}],["Vanilla Milkshake",{"r":219,"g":214,"b":205}],["New French Navy",{"r":106,"g":106,"b":112}],["Tropical Blue",{"r":113,"g":174,"b":212}],["Brick Red",{"r":204,"g":125,"b":134}],["Denim Blue",{"r":130,"g":133,"b":162}],["Forest Green",{"r":110,"g":112,"b":108}],["Spring Green",{"r":104,"g":205,"b":184}],["Ultra Violet",{"r":128,"g":124,"b":172}],["Deep Sea Blue",{"r":109,"g":157,"b":172}],["Nude",{"r":203,"g":197,"b":191}]]
            },

            womens: {
                code: "JH01F",
                id: "7200",
                colors: [["Arctic White",{"r":242,"g":242,"b":242}],["Airforce Blue",{"r":161,"g":180,"b":197}],["Ash",{"r":221,"g":220,"b":219}],["Bottle Green",{"r":122,"g":153,"b":148}],["Burgundy",{"r":182,"g":123,"b":144}],["Candyfloss Pink",{"r":237,"g":184,"b":210}],["Charcoal",{"r":129,"g":132,"b":132}],["Fire Red",{"r":233,"g":138,"b":134}],["Hawaiian Blue",{"r":124,"g":199,"b":218}],["Heather Grey",{"r":217,"g":221,"b":223}],["Hot Pink",{"r":227,"g":135,"b":187}],["Jade",{"r":124,"g":191,"b":182}],["Jet Black",{"r":93,"g":93,"b":93}],["Kelly Green",{"r":122,"g":177,"b":148}],["Lime",{"r":199,"g":213,"b":166}],["New French Navy",{"r":122,"g":129,"b":160}],["Orange Crush",{"r":242,"g":190,"b":132}],["Plum",{"r":159,"g":131,"b":150}],["Purple",{"r":138,"g":135,"b":168}],["Red Hot Chilli",{"r":194,"g":122,"b":142}],["Royal Blue",{"r":123,"g":157,"b":187}],["Sapphire Blue",{"r":123,"g":196,"b":225}],["Sky Blue",{"r":189,"g":215,"b":235}],["Sun Yellow",{"r":247,"g":234,"b":127}],["Turquoise Surf",{"r":157,"g":206,"b":218}],["Oxford Navy",{"r":137,"g":137,"b":144}]]
            },
        },

        zoodie: {
            unisex: {
                code: "JH050",
                id: "3739",
                colors: [["Arctic White",{"r":227,"g":226,"b":230}],["Bottle Green",{"r":128,"g":157,"b":144}],["Charcoal",{"r":163,"g":161,"b":162}],["Fire Red",{"r":234,"g":132,"b":126}],["Hawaiian Blue",{"r":114,"g":210,"b":233}],["Heather Grey",{"r":204,"g":203,"b":211}],["Hot Pink",{"r":240,"g":157,"b":182}],["Jet Black",{"r":92,"g":92,"b":92}],["Kelly Green",{"r":118,"g":208,"b":173}],["Oxford Navy",{"r":108,"g":112,"b":135}],["Purple",{"r":147,"g":124,"b":160}],["Red Hot Chilli",{"r":226,"g":125,"b":128}],["Royal Blue",{"r":148,"g":170,"b":212}],["Sapphire Blue",{"r":132,"g":197,"b":230}],["Steel Grey",{"r":151,"g":143,"b":142}],["New French Navy",{"r":107,"g":112,"b":118}],["Burgundy",{"r":173,"g":125,"b":136}],["Forest Green",{"r":107,"g":123,"b":117}],["Orange Crush",{"r":227,"g":169,"b":121}],["Sun Yellow",{"r":247,"g":233,"b":122}],["Ash",{"r":204,"g":204,"b":208}]]
            },

            womens: {
                code: "JH055",
                id: "3742",
                colors: [["Arctic White",{"r":229,"g":229,"b":233}],["Baby Pink",{"r":236,"g":216,"b":222}],["Candyfloss Pink",{"r":233,"g":187,"b":202}],["Fire Red",{"r":215,"g":138,"b":140}],["Hawaiian Blue",{"r":146,"g":209,"b":222}],["Heather Grey",{"r":217,"g":219,"b":226}],["Hot Pink",{"r":220,"g":151,"b":169}],["Jet Black",{"r":116,"g":115,"b":113}],["Kelly Green",{"r":124,"g":198,"b":168}],["Purple",{"r":160,"g":145,"b":173}],["Sapphire Blue",{"r":129,"g":184,"b":208}],["New French Navy",{"r":120,"g":128,"b":132}]]
            },
        },
    };

    $(() => {
        var logoPrint = $('[name="logopos"][value="print"]');
        var logoEmbroidered =  $('[name="logopos"][value="embroid"]');
        var optionSizeXS = $('#option-size-xs');
        var supplierLink = $('.supplier-url');
        var colorSelect = $('[name="hoodie-color"]');

        function getHoodieType() {
            return $('[name="hoodie-type"]:checked').val();
        }

        function getSizeType() {
            return $('[name="size-type"]:checked').val();
        }

        function getSelectedColor() {
            return $('[name="hoodie-color"] > option:selected');
        }

        function updateSize() {
            var isZoodie = getHoodieType() == "zoodie";
            var isUnisex = getSizeType() == "unisex";
            var disabled = isZoodie && isUnisex;

            optionSizeXS.prop('disabled', disabled);
            optionSizeXS.text(disabled ? "XS (unavailable for unisex zipped hoodies)" : "XS")
            
            // if XS selected, and we've disabled it, then
            // select S
            if (optionSizeXS.prop("selected") && disabled) {
                $('#option-size-s').prop("selected", true);
            }
        }

        function updateHoodieColor(color) {
            $(".cls-1").css("fill", color);

            var color = "black";
            if (tinycolor($(".cls-1").css("fill")).isDark()) {
                color = "white";
            }

            $(".cls-1").css("stroke", color);
        }

        function onColorUpdate() {
            var color = getSelectedColor().data("rgb");
            updateHoodieColor(color);
        }

        function onPrintColorUpdate() {
            var color = $('[name="print-color"]:checked').val();
            $(".cls-2,.cls-3").css("fill", color);
        }

        function updateHoodieInfo() {
            updateSize();

            var hoodieType = getHoodieType();
            var sizeType = getSizeType();
            var info = hoodies[hoodieType][sizeType];

            var url = "http://www.promotional-store.com/referredproduct.aspx?id=" + info.id;

            supplierLink.attr("href", url);
            supplierLink.text(info.code);

            $('[name="hoodie-code"]').val(info.code);

            var selectedColor = getSelectedColor().val();

            colorSelect.children().remove();
            info.colors.sort();
            info.colors.forEach(color => {
                $("<option></option>", {
                    text: color[0],
                    selected: selectedColor == color[0],
                    value: color[0],
                    "data-rgb": "rgb(" + color[1].r + "," + color[1].g + "," + color[1].b + ")"

                }).appendTo(colorSelect);
            });

            onColorUpdate();
            onPrintColorUpdate();

            if (hoodieType == "zoodie") {
                $("#himg-college").hide();
                $("#himg-zoodie").show();

                logoEmbroidered.prop("checked", true);

                logoPrint.prop("disabled", true);
                logoPrint.parent().parent().addClass("disabled");
            } else {
                $("#himg-zoodie").hide();
                $("#himg-college").show();

                logoPrint.prop("disabled", false);
                logoPrint.parent().parent().removeClass("disabled");
            }
        }

        // zoodies only support embroidered
        // also update size (XS)
        $('[name="hoodie-type"]').change(() => {
            updateHoodieInfo();
        });

        $('[name="size-type"]').change(() => {
            updateHoodieInfo();
        });

        $('[name="hoodie-color"]').change(() => {
            onColorUpdate();
        });

        $('[name="print-color"]').change(() => {
            onPrintColorUpdate();
        });

        updateHoodieInfo();
    });
</script>
